var flashTimeout;
clearTimeout(flashTimeout);
$('#flash').html('<%= j render partial: "shared/flash" %>').show();
flashTimeout = setTimeout( function() {
  $('#flash').slideUp(250);
}, 4000);

<% flash.clear %>
